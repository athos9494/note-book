# 数据存储

## 数据类型

现今数据主要是五种：数字、文本、图像、音频和视频。

计算机所有的外部的数据类型都是采用统一的数据表示发转换后存入计算机只能够，这种通用的格式称为位模式。

- 位（bit）是存储在计算机中的最小单位`0`和`1`,位代代表的是设备的两种状态：`0`代表断开状态，`1`表示连接状态，一个位表示一个电子开关，一个开关只能存储一个位的信息。

- 位模式：为了表示数据的不同类型，通常长度为8的位模式被称为1字节。

如果使用文本编辑器，键盘上的字符`A`可以使用8位模式`01000001`存储，同样的8位模式可以表示数字`65`.类似的同样的位模式可以表示部分图像、歌曲、影片的部分场景，计算机内存储的数据计算机是无需辨别它们表示的是何种数据类型。

- 数据压缩 ：为了减少占用空间，数据在被存到计算机之前通常是要被压缩的。

- 错误检测与修正

## 存储数字
### 存储整数

- 无符号整数是包括零和正整数的非负整数。计算机定义了一个常量-`最大无符号整数`，它的值是（2<sup>n</sup>-1）,这里的n就是计算机用来表示无符号整数的二进制位数。
    - **存储无符号整数**：
        - 将整数鞭策变成二进制数
        - 如果二进制位数不足n位，则在二进制的左边补0；如果位数大于n，该数据无法存储，会导致溢出的情况。
    - **译解无符号整数**：输出设备译解内存中位模式的位串转换位一个十进制的无符号整数。
    - **溢出**：n位存储单元中，我们存储的无符号整数在0到2<sup>n</sup>-1，如果存储大于这个范围就会发生溢出。
    
    - **应用**：
        
        - **计数**：不需要负数，可以从1或者0开始增长。
        - **寻址**： 有些计算机语言，在一个存储单元中存储了另一个存储单元的地址。地址都是从0(存储器的第一个字节)开始到整个存储器的总字节数的正数
        - **存储其他数据类型**其他的数据类型（文本、图像、音频和视频）是以位模式存储的，可以翻译为无符号整数
- **符号加绝对值表示**:在符号加绝对值表示法中，最左位用用于定义整数的符号。0表示正整數。1表示负整数

- **二进制补码表示法**： 

    - **两种表示**
        - **反码**：简单的反转各个位，0变1，1变0就行
        - **补码**：从右边开始复制，直到遇到1，保持这个1不变，然后反转其他位即可。
    - **二进制补码存储整数**
        - 整数变成n位二进制整数
        - 如果整数是正数或者0，用原样存储，如果是负数，计算机取补码存储
    - **二进制补码还原整数**
        - 最左位是1，计算机取补码；最左位是0，计算机不进行操作
        - 计算机将整数转换十进制
### 实数

- **浮点表示法**：符号+位移量+定点数，用来表示很小或者很大的十进制数或者二进制数
    
    - 十进制（-0.000 000 000 000 023 2），科学计数就是（-2.32× 10<sup>-14</sup>）
    - 二进制-(0.000 000 000 000 000 000 000 001 01)科学计数就是（-1.01× 2<sup>-24</sup>）


##  存储文本

- ASCII：使用7位表示每个符号，有128中不同的符号，现在也属于Unicode的一部分
- Unicode：使用32位并能表示最大达232=4 294 967 296个符号。代码的不同部分被分配用于表示来自世界上不同语言的符号。其中还有些部分被用于表示图形和特殊符号。

## 存储音频

- 采样：在模拟信号上选择数量有限的点来度量它们的值并记录下来
    - 采样率：每秒40 000个样本的采样率对音频信号来说是足够好的
- 量化：从每个样本测量来的值是真实的数字。这意味着我们可能要为每一秒的样本存储40 000个真实的值。但是，为每个样本使用一个无符号的数(位模式)会更简便。量化指的是将样本的值截取为最接近的整数值的一种过程。例如，如果实际的值为17.2，就可截取为17如果值为17.8，就可截取为18。
- 些系统使用无符号整数来表示样本，而另一些使用有符号的整数来做。但是，有符号的整数不必用在二进制补码中，它们可以是符号加绝对值的值。最左边的位用于表示符号(0表示正值，1表示负值)，其余的位用于表示绝对值。
    - 每样本位：对于每个样本系统需要决定分配多少位。尽管在过去仅有8位分配给声音样本，现在每样本16、24甚至32位都是正常的。每样本位的数量有时称为位深度。
    - 位率：如果我们称位深度或每样本位的数量为B,每秒样本数为S,我们需要为每秒的音频存储S x B位。该乘积有时称为位率R.例如，如果我们使用每秒40 000个样本以及每样本16位, 位率是 R = 40 000 × 16= 640 000 b/s=640 KB/s

当今音频编码的主流标准是MP3(MPEG Layer 3的简写)。该标准是用于视频压缩方法的MPEG(动态图像专家组)标准的一个修改版。它采用每秒44 100个样本以及每样本16位。结果信号达到705 600 b/s的位率，再用去掉那些人耳无法识别的信息的压缩方法进行压缩。




## 存储图像：光栅图或矢量图。

- 光栅图
    - 解析度：在图像扫描中，我们要决定对于每英寸的方块或线条需要记录多少像素。在图像处理中的扫描率称为解析度。如果解析率足够高，人眼不会看出在重现图像中的不连续
    - 色彩深度（真彩色与索引色）：用于表现像素的位的数量，即色彩深度，依赖于像素的颜色是如何由不同的编码技术来处理的。对颜色的感觉是我们的眼睛如何对光线的响应。我们的眼睛有不同类型的感光细胞一些响应红、黄、蓝三原色(也叫RGB)，而另一些仅仅响应光的密度
几种用于图像编码的实际标准正在使用中。JPEG(联合图像专家组)使用真彩色模式，但压缩图像来减少位的数量(参见第15章)。另一方面，GIF(图形交换格式)使用索引色模式

- 矢量图
光栅图有两个缺点，即文件体积太大和重新调整图像大小有麻烦。放大光栅图像意味着扩大像素，所以放大后的图像看上去很粗糙。但是，矢量图图像编码方法并不存储每个像素的位模式。一个图像被分解成几何图形的组合
矢量图不适合存储照片图像的细微精妙。JPEG或GIF光栅图提供了更好和更生动的图片。矢量图适合应用程序采用主要的几何元素来创建图像。它用于诸如Flash这样的应用程序，以及创建TrueType(微软、苹果公司)和PostScript(Adobe公司)字体。计算机辅助设计(CAD)也使用矢量图进行工程绘图。


## 存储视频

视频是图像(称为帧)在时间上的表示。一部电影就是一系列的帧一张接一张地播放而形成运动的图像。换言之，视频是随空间(单个图像)和时间(一系列图像)变化的信息表现。所以，如果知道如何将一幅图像存储在计算机中，我们也就知道如何储存视频每一幅图像或帧转化成一系列位模式并储存。这些图像组合起来就可表示视频。需要注意现在视频通常是被压缩存储的。

---

# 数学运算
## 逻辑运算

- **位层次与位模式层次逻辑运算**：`与and` `或or` `非not` `异或xor`

## 移位运算

可以把移位运算分成两大类逻辑移位运算和算术移位运算。
- 逻辑移位运算应用于不带符号位的数的模式。原因是这些移位运算可能会改变数的符号，此符号是由模式中最左位定义的。
- 算术移位运算假定位模式是用二进制补码格式表示的带符号位的整数。算术右移被用来对整数除以2；而算术左移被用来对整数乘以2(后面讨论)。这些运算不应该改变符号位(最左)。算术右移保留符号位，但同时也把它复制，放入相邻的右边的位中。因此符号被保存。算术左移丢弃符号位，接受它的左边的位作为符号位。如果新的符号位与原先的相同，那么运算成功，否则发生上溢或下溢，结果是非法的

## 算数运算

算术运算包括加、减、乘、除，适用于整数和浮点数。

### 整数的算数运算

- **二进制补码中的加减法**
整数通常是以二进制补码形式存储的。二进制补码表示法的一个优点是加法和减法间没有区别。当遇到减法时，计算机只简单地把它转变为加法，但要为第二个数求二进 制的补

- **符号加绝对值整数的加减法**
用符号加绝对值表示的整数的加法和减法看起来非常复杂。我们有4种不同的符号组合(两个符号，每个有两个值)，对于减法有4种不同的条件。这就意味着我们要考虑8种不同的情况

### 实数的算数运算

这只考虑实数的加减法：以浮点数存储的实数的加法和减法被简化为小数点对齐后以符号加绝对值格式(符号和尾数的组合)存储的两整数的加法和减法。