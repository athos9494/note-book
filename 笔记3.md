# 如何改变文件属性与权限
    
一个文件的属性与权限有很多，这里介绍的是几个常用的修改群组、拥有者以及各种身份的指令:

指令  | 功能
---|---
chgrp | 改变文件所属群组
chown | 改变文件拥有者
chmod | 改变文件的权限
## 改变所属群组：chgrp
  chgrp=change group，在lunix系统里，文件或目录的权限的掌控以拥有者及所诉群组来管理。可以使用chgrp指令取变更文件与目录所属群组，这种方式采用群组名称或群组识别码都可以。要被改变的组名必须要在/etc/group文件内存在才行。此处的etc用来存放系统的主要设定档。例如人员的帐号密码档、各种服务的启始档等等。一般来说，这个目录下的各档案属性是可以让一般使用者查阅的，但是只有root有权力修改。
    
### 语法：

    chgrp [-cfhRv][--help][--version][所属群组][文件或目录...] 或 chgrp [-cfhRv][--help][--reference=<参考文件或目录>][--version][文件或目录...]
    
指令参数 | 含义
---|---
-c或--changes | 效果类似"-v"参数，但仅回报更改的部分。
-f或--quiet或--silent | 　不显示错误信息。
-h或--no-dereference | 只对符号连接的文件作修改，而不更动其他任何相关文件。
-R或--recursive | 递归处理，将指定目录下的所有文件及子目录一并处理。
-v或--verbose | 显示指令执行过程。
--help | 在线帮助。
--reference=<参考文件或目录> | 把指定文件或目录的所属群组全部设成和参考文件或目录的所属群组相同。
--version | 显示版本信息。


例如我们想将文件file的群组变为bin,只需要输入

    chgrp -v bin file.txt
    
如果要根据指定文件改变群组属性，比如改变file2的群组属性与file1相同需要输入指令：

    chgrp --reference=file1.txt file2.txt
## 改变拥有者：chown
Linux/Unix 是多人多工操作系统，所有的文件皆有拥有者。利用 chown 将指定文件的拥有者改为指定的用户或组，用户可以是用户名或者用户ID；组可以是组名或者组ID；文件是以空格分开的要改变权限的文件列表，支持通配符。 
一般来说，这个指令只有是由系统管理者(root)所使用，一般使用者没有权限可以改变别人的文件拥有者，也没有权限把自己的文件拥有者改设为别人。只有系统管理者(root)才有这样的权限。
### 语法：
    chown [-cfhvR] [--help] [--version] user[:group] file...
指令参数 | 参数含义
--- | ---
user | 新的文件拥有者的使用者 ID
group | 新的文件拥有者的使用者组(group)
-c | 显示更改的部分的信息
-f | 忽略错误信息
-h |修复符号链接
-v | 显示详细的处理信息
-R | 处理指定目录以及其子目录下的所有文件
--help | 显示辅助说明
--version | 显示版本

比如我们想要将文件 file1.txt 的拥有者设为 runoob，群体的使用者 runoobgroup :

    chown runoob:runoobgroup file1.txt
    
将目前目录下的所有文件与子目录的拥有者皆设为 runoob，群体的使用者 runoobgroup:

    chown -R runoob:runoobgroup *
    
## 改变文件的权限：chmod

Linux/Unix 的文件调用权限分为三级 : 文件拥有者、群组、其他。利用 chmod 可以藉以控制文件如何被他人所调用。

使用权限 : 所有使用者.
    
### 语法：

    chmod [-cfvR] [--help] [--version] mode file...
### 参数说明：
mode : 权限设定字串，格式如下 :
    
    [ugoa...][[+-=][rwxX]...][,...]

指令参数</div> | 含义
:---: | ---
u | 表示该文件的拥有者，g 表示与该文件的拥有者属于同一个群体(group)者，o 表示其他以外的人，a 表示这三者皆是。
+ | 表示增加权限
- | 表示取消权限
= | 表示唯一设定权限。
r | 表示可读取
w | 表示可写入
x | 表示可执行，X 表示只有当该文件是个子目录或者该文件已经被设定过为可执行。
-c | 若该文件权限确实已经更改，才显示其更改动作
-f | 若该文件权限无法被更改也不要显示错误讯息
-v | 显示权限变更的详细资料
-R | 对目前目录下的所有文件与子目录进行相同的权限变更(即以递回的方式逐个变更)
--help | 显示辅助说明
--version | 显示版本

举例说明：
将文件 file1.txt 设为所有人皆可读取 :
>chmod ugo+r file1.txt

将文件 file1.txt 设为所有人皆可读取 :
>chmod a+r file1.txt

将文件 file1.txt 与 file2.txt 设为该文件拥有者，与其所属同一个群体者可写入，但其他以外的人则不可写入 :
>chmod ug+w,o-w file1.txt file2.txt

将 ex1.py 设定为只有该文件拥有者可以执行 :
>chmod u+x ex1.py

将目前目录下的所有文件与子目录皆设为任何人可读取 :
>chmod -R a+r *

---

# 目录与文件的权限意义
## 权限对于文件的重要性：
    
文件是实际含有数据的地方，包括一般文本文件、数据库内容文件、二进制可执行文件(binary program)等等。 因此，权限对于文件来说，他的意义是这样的：
权限 | 意义
---|---
r (read)|可读取此一文件的实际内容，如读取文本文件的文字内容等；
w (write)|可以编辑、新增或者是修改该文件的内容(但不含删除该文件)；
x (execute)|该文件具有可以被系统执行的权限。

### 注：
- Linux底下，我们的文件是否能被执行，则是藉由是否具有『x』这个权限来决定的！跟档名是没有绝对的关系的
- 当你对一个文件具有w权限时，你可以具有写入/编辑/新增/修改文件的内容的权限， 但并不具备有删除该文件本身的权限！

## 权限对于目录的重要性：

目录的主要内容记录在文件名列表，文件名与目录有强烈的关连。所以如果是针对目录时，那个 r, w, x 对目录的意义如下：
- r (read contents in directory)：

  表示具有读取目录结构列表的权限，所以当你具有读取(r)一个目录的权限时，表示你可以查询该目录下的文件名数据。 所以你就可以利用 ls 这个指令将该目录的内容列表显示出来。
- w (modify contents of directory)：

  这个可写入的权限对目录来说，是很了不起的！ 因为他表示你具有异动该目录结构列表的权限，也就是底下这些权限：
  - 建立新的文件与目录；
  - 删除已经存在的文件与目录(不论该文件的权限为何！)；
  - 将已存在的文件或目录进行更名；
  - 搬移该目录内的文件、目录位置。
- x (access directory)：

    目录不可以被执行，目录的x代表的是用户能否进入该目录成为工作目录的用途！ 所谓的工作目录(work directory)就是你目前所在的目录啦！举例来说，当你登入Linux时， 你所在的家目录就是你当下的工作目录。而变换目录的指令是cd(change directory)。
    
举例：
> drwxr--r--  3  root  root  4096   Jun 25 08:35   .ssh

假设系统有个账号名称为vbird，这个账号并没有支持root群组，因此vbird对此目录仅具有r的权限，因此vbird可以查询此目录下的文件名列表。因为vbird不具有x的权限， 因此vbird并不能切换到此目录内！

---

# 文件种类与扩展名

## 文件种类
- 正规文件(regular file )：
  就是一般我们在进行存取的类型的文件，在由 ls -al 所显示出来的属性方面，第一个字符为 [ - ]，例如 [-rwxrwxrwx ]
  另外，依照文件的内容，又大略可以分为：
  - 纯文本档(ASCII)：这是Linux系统中最多的一种文件类型啰， 称为纯文本档是因为内容为我们人类可以直接读到的数据，例如数字、字母等等。 几乎只要我们可以用来做为设定的文件都属于这一种文件类型。
  - 二进制文件(binary)：我们的系统其实仅认识且可以执行二进制文件(binary file)
  - 数据格式文件(data)： 有些程序在运作的过程当中会读取某些特定格式的文件，那些特定格式的文件可以被称为数据文件 (data file)。

- 目录(directory)：
  第一个属性为 [ d ]，例如 [drwxrwxrwx]。
- 连结档(link)：
  就是类似Windows系统底下的快捷方式，第一个属性为 [ l ](英文L的小写)，例如[lrwxrwxrwx]。
- 设备与装置文件(device)：
  与系统周边及储存等相关的一些文件， 通常都集中在/dev这个目录之下！通常又分为两种：
  
  - 区块(block)设备档 ：就是一些储存数据， 以提供系统随机存取的接口设备，举例来说，硬盘与软盘等就是，你可以随机的在硬盘的不同区块读写，这种装置就是成组设备。
  - 字符(character)设备文件：亦即是一些串行端口的接口设备， 例如键盘、鼠标等等！这些设备的特色就是一次性读取的，不能够截断输出。

- 数据接口文件(sockets)：
  这种类型的文件通常被用在网络上的数据承接。我们可以启动一个程序来监听客户端的要求， 而客户端就可以透过这个socket来进行数据的沟通了。第一个属性为 s ， 最常在/var/run这个目录中看到这种文件类型。
- 数据输送文件(FIFO, pipe)：
  FIFO也是一种特殊的文件类型，他主要的目的在解决多个程序同时存取一个文件所造成的错误问题。 FIFO是first-in-first-out的缩写。第一个属性为[p]。

## 文件扩展名

基本上，Linux的文件是没有所谓的扩展名的，之前有言，一个Linux文件能不能被执行，与他的第一栏的十个属性有关， 与档名没关系。只要你的权限当中具有x的话，例如[ -rwx-r-xr-x ] 即代表这个文件可以被执行。
可以被执行跟可以执行成功是不一样的～举例来说，在root家目录下的install.log 是一个纯文本档，如果经由修改权限成为 -rwxrwxrwx 后，该文件也不能成功执行，因为这个文件没有可以执行的内容，所以X只能代表文件具有可执行的能力，不代表一定能能够执行成功。
以下是几种常用的扩展名：

- *.sh ： 脚本或批处理文件 (scripts)，因为批处理文件为使用shell写成的，所以扩展名就编成 .sh ；

- *Z, *.tar, *.tar.gz, *.zip, *.tgz： 经过打包的压缩文件。这是因为压缩软件分别为 gunzip, tar 等等的，由于不同的压缩软件，而取其相关的扩展名！

- *.html, *.php：网页相关文件，分别代表 HTML 语法与 PHP 语法的网页文件啰！ .html 的文件可使用网页浏览器来直接开启，至于 .php 的文件， 则可以透过 client 端的浏览器来 server 端浏览，以得到运算后的网页结果。

基本上，Linux系统上的文件名真的只是让你了解该文件可能的用途而已， 真正的执行与否仍然需要权限的规范。例如虽然有一个文件为可执行文件， 如常见的/bin/ls这个显示文件属性的指令，不过，如果这个文件的权限被修改成无法执行时， 那么ls就变成不能执行。

上述的这种问题最常发生在文件传送的过程中。例如你在网络上下载一个可执行文件，但是偏偏在你的 Linux系统中就是无法执行，那么就是可能文件的属性被改变了，从网络上传送到你的 Linux系统中，文件的属性与权限会被改变。

## 文件长度限制

- 单一文件或目录的最大容许文件名为 255 个字符；
- 包含完整路径名称及目录 (/) 之完整档名为 4096 个字符。

## Linux文件名的限制

由于Linux在文字接口下的一些指令操作关系，一般来说，你在设定Linux底下的文件名时， 最好避免使用一些特殊字符，因为这些符号在文字接口下，具有特殊意义，另外，文件名的开头为小数点.时， 代表这个文件为隐藏档，同时，由于指令下达当中，常常会使用到 -option 之类的选项， 也应该避免将文件档名的开头以 - 或 + 来命名。